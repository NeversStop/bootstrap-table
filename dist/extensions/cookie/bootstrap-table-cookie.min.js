/**
  * bootstrap-table - An extended Bootstrap table with radio, checkbox, sort, pagination, and other added features. (supports twitter bootstrap v2 and v3).
  *
  * @version v1.13.0
  * @homepage http://bootstrap-table.wenzhixin.net.cn
  * @author wenzhixin <wenzhixin2010@gmail.com> (http://wenzhixin.net.cn/)
  * @license MIT
  */

(function(a,b){if('function'==typeof define&&define.amd)define(['jquery'],b);else if('undefined'!=typeof exports)b(require('jquery'));else{b(a.jquery),a.bootstrapTableCookie={exports:{}}.exports}})(this,function(a){'use strict';var b=function(a){return a&&a.__esModule?a:{default:a}}(a),c={sortOrder:'bs.table.sortOrder',sortName:'bs.table.sortName',pageNumber:'bs.table.pageNumber',pageList:'bs.table.pageList',columns:'bs.table.columns',searchText:'bs.table.searchText',filterControl:'bs.table.filterControl'},d=function(a){var b=a.$header;return a.options.height&&(b=a.$tableHeader),b},e=function(a){var b='select, input';return a.options.height&&(b='table select, table input'),b},f=function(){return!!navigator.cookieEnabled},g=function(a,b){for(var c=-1,d=0;d<b.length;d++)if(a.toLowerCase()===b[d].toLowerCase()){c=d;break}return c},h=function(a,b,c){if(a.options.cookie&&f()&&''!==a.options.cookieIdTable&&-1!==g(b,a.options.cookiesEnabled)){switch(b=a.options.cookieIdTable+'.'+b,a.options.cookieStorage){case'cookieStorage':document.cookie=[b,'=',c,'; expires='+k(a.options.cookieExpire),a.options.cookiePath?'; path='+a.options.cookiePath:'',a.options.cookieDomain?'; domain='+a.options.cookieDomain:'',a.options.cookieSecure?'; secure':''].join('');case'localStorage':localStorage.setItem(b,c);break;case'sessionStorage':sessionStorage.setItem(b,c);break;default:return!1;}return!0}},i=function(a,b,c){if(!c)return null;if(-1===g(c,a.options.cookiesEnabled))return null;switch(c=b+'.'+c,a.options.cookieStorage){case'cookieStorage':var d='; '+document.cookie,e=d.split('; '+c+'=');return 2===e.length?e.pop().split(';').shift():null;case'localStorage':return localStorage.getItem(c);case'sessionStorage':return sessionStorage.getItem(c);default:return null;}},j=function(a,b,c){switch(c=b+'.'+c,a.options.cookieStorage){case'cookieStorage':document.cookie=[encodeURIComponent(c),'=','; expires=Thu, 01 Jan 1970 00:00:00 GMT',a.options.cookiePath?'; path='+a.options.cookiePath:'',a.options.cookieDomain?'; domain='+a.options.cookieDomain:''].join('');break;case'localStorage':localStorage.removeItem(c);break;case'sessionStorage':sessionStorage.removeItem(c);}return!0},k=function(a){var b=a.replace(/[0-9]*/,'');switch(a=a.replace(/[A-Za-z]{1,2}/,''),b.toLowerCase()){case's':a=+a;break;case'mi':a*=60;break;case'h':a=60*(60*a);break;case'd':a=60*(60*(24*a));break;case'm':a=60*(60*(24*(30*a)));break;case'y':a=60*(60*(24*(365*a)));break;default:a=void 0;}if(!a)return'';var c=new Date;return c.setTime(c.getTime()+1e3*a),c.toGMTString()},l=function(a){setTimeout(function(){var f=JSON.parse(i(a,a.options.cookieIdTable,c.filterControl));if(!a.options.filterControlValuesLoaded&&f){var g={},h=d(a),j=e(a),k=function(a,c){(0,b.default)(c).each(function(c,d){''!==d.text&&((0,b.default)(a).val(d.text),g[d.field]=d.text)})};h.find(j).each(function(){var a=(0,b.default)(this).closest('[data-field]').data('field'),c=b.default.grep(f,function(b){return b.field===a});k(this,c)}),a.initColumnSearch(g),a.options.filterControlValuesLoaded=!0,a.initServer()}},250)};b.default.extend(b.default.fn.bootstrapTable.defaults,{cookie:!1,cookieExpire:'2h',cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:'',cookiesEnabled:['bs.table.sortOrder','bs.table.sortName','bs.table.pageNumber','bs.table.pageList','bs.table.columns','bs.table.searchText','bs.table.filterControl'],cookieStorage:'cookieStorage',filterControls:[],filterControlValuesLoaded:!1}),b.default.fn.bootstrapTable.methods.push('getCookies'),b.default.fn.bootstrapTable.methods.push('deleteCookie'),b.default.extend(b.default.fn.bootstrapTable.utils,{setCookie:h,getCookie:i});var m=b.default.fn.bootstrapTable.Constructor,n=m.prototype.init,o=m.prototype.initTable,p=m.prototype.initServer,q=m.prototype.onSort,r=m.prototype.onPageNumber,s=m.prototype.onPageListChange,t=m.prototype.onPagePre,u=m.prototype.onPageNext,v=m.prototype.toggleColumn,w=m.prototype.selectPage,x=m.prototype.onSearch;m.prototype.init=function(){if(this.options.filterControls=[],this.options.filterControlValuesLoaded=!1,this.options.cookiesEnabled='string'==typeof this.options.cookiesEnabled?this.options.cookiesEnabled.replace('[','').replace(']','').replace(/ /g,'').toLowerCase().split(','):this.options.cookiesEnabled,this.options.filterControl){var a=this;this.$el.on('column-search.bs.table',function(b,d,e){for(var f=!0,g=0;g<a.options.filterControls.length;g++)if(a.options.filterControls[g].field===d){a.options.filterControls[g].text=e,f=!1;break}f&&a.options.filterControls.push({field:d,text:e}),h(a,c.filterControl,JSON.stringify(a.options.filterControls))}).on('created-controls.bs.table',l(a))}n.apply(this,Array.prototype.slice.apply(arguments))},m.prototype.initServer=function(){var a=this;if(a.options.cookie&&a.options.filterControl&&!a.options.filterControlValuesLoaded){var b=JSON.parse(i(a,a.options.cookieIdTable,c.filterControl));if(b)return}p.apply(this,Array.prototype.slice.apply(arguments))},m.prototype.initTable=function(){o.apply(this,Array.prototype.slice.apply(arguments)),this.initCookie()},m.prototype.initCookie=function(){if(this.options.cookie){if(''===this.options.cookieIdTable||''===this.options.cookieExpire||!f())return console.error('Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies'),void(this.options.cookie=!1);var a=i(this,this.options.cookieIdTable,c.sortOrder),d=i(this,this.options.cookieIdTable,c.sortName),e=i(this,this.options.cookieIdTable,c.pageNumber),g=i(this,this.options.cookieIdTable,c.pageList),h=JSON.parse(i(this,this.options.cookieIdTable,c.columns)),j=i(this,this.options.cookieIdTable,c.searchText);this.options.sortOrder=a?a:this.options.sortOrder,this.options.sortName=d?d:this.options.sortName,this.options.pageNumber=e?+e:this.options.pageNumber,this.options.pageSize=g?g===this.options.formatAllRows()?g:+g:this.options.pageSize,this.options.searchText=j?j:'',h&&b.default.each(this.columns,function(a,c){c.visible=-1!==b.default.inArray(c.field,h)})}},m.prototype.onSort=function(){q.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.sortOrder,this.options.sortOrder),h(this,c.sortName,this.options.sortName)},m.prototype.onPageNumber=function(){return r.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.pageNumber,this.options.pageNumber),!1},m.prototype.onPageListChange=function(){return s.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.pageList,this.options.pageSize),h(this,c.pageNumber,this.options.pageNumber),!1},m.prototype.onPagePre=function(){return t.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.pageNumber,this.options.pageNumber),!1},m.prototype.onPageNext=function(){return u.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.pageNumber,this.options.pageNumber),!1},m.prototype.toggleColumn=function(){v.apply(this,Array.prototype.slice.apply(arguments));var a=[];b.default.each(this.columns,function(b,c){c.visible&&a.push(c.field)}),h(this,c.columns,JSON.stringify(a))},m.prototype.selectPage=function(a){w.apply(this,Array.prototype.slice.apply(arguments)),h(this,c.pageNumber,a)},m.prototype.onSearch=function(){var a=Array.prototype.slice.apply(arguments);x.apply(this,a),(0,b.default)(a[0].currentTarget).parent().hasClass('search')&&h(this,c.searchText,this.searchText),h(this,c.pageNumber,this.options.pageNumber)},m.prototype.getCookies=function(){var a=this,d={};return b.default.each(c,function(b,c){d[b]=i(a,a.options.cookieIdTable,c),'columns'===b&&(d[b]=JSON.parse(d[b]))}),d},m.prototype.deleteCookie=function(a){''!==a&&f()&&j(this,this.options.cookieIdTable,c[a])}});