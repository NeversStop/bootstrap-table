/**
  * bootstrap-table - An extended Bootstrap table with radio, checkbox, sort, pagination, and other added features. (supports twitter bootstrap v2 and v3).
  *
  * @version v1.13.0
  * @homepage http://bootstrap-table.wenzhixin.net.cn
  * @author wenzhixin <wenzhixin2010@gmail.com> (http://wenzhixin.net.cn/)
  * @license MIT
  */

(function(a,b){if('function'==typeof define&&define.amd)define(['jquery'],b);else if('undefined'!=typeof exports)b(require('jquery'));else{b(a.jquery),a.bootstrapTableFilterControl={exports:{}}.exports}})(this,function(a){'use strict';function b(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function c(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function d(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(a){return a&&a.__esModule?a:{default:a}}(a),f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if('value'in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},h=e.default.fn.bootstrapTable.utils,k={getOptionsFromSelectControl:function(a){return a.get(a.length-1).options},hideUnusedSelectOptions:function(a,b){for(var c=k.getOptionsFromSelectControl(a),d=0;d<c.length;d++)''!==c[d].value&&(b.hasOwnProperty(c[d].value)?a.find(h.sprintf('option[value=\'%s\']',c[d].value)).show():a.find(h.sprintf('option[value=\'%s\']',c[d].value)).hide())},addOptionToSelectControl:function(a,b,c){var d=e.default.trim(b),f=(0,e.default)(a.get(a.length-1));k.existOptionInSelectControl(a,d)||f.append((0,e.default)('<option></option>').attr('value',d).text((0,e.default)('<div />').html(c).text()))},sortSelectControl:function(a){var b=(0,e.default)(a.get(a.length-1)),c=b.find('option:gt(0)');c.sort(function(c,a){var b=(0,e.default)(c).text().toLowerCase(),d=(0,e.default)(a).text().toLowerCase();return e.default.isNumeric(c)&&e.default.isNumeric(a)&&(b=parseFloat(b),d=parseFloat(d)),b>d?1:b<d?-1:0}),b.find('option:gt(0)').remove(),b.append(c)},existOptionInSelectControl:function(a,b){for(var c=k.getOptionsFromSelectControl(a),d=0;d<c.length;d++)if(c[d].value===b.toString())return!0;return!1},fixHeaderCSS:function(a){var b=a.$tableHeader;b.css('height','77px')},getCurrentHeader:function(a){var b=a.$header,c=a.options,d=a.$tableHeader,e=b;return c.height&&(e=d),e},getCurrentSearchControls:function(a){var b=a.options,c='select, input';return b.height&&(c='table select, table input'),c},getCursorPosition:function(a){if(h.isIEBrowser()){if((0,e.default)(a).is('input[type=text]')){var d=0;if('selectionStart'in a)d=a.selectionStart;else if('selection'in document){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;b.moveStart('character',-a.value.length),d=b.text.length-c}return d}return-1}return-1},setCursorPosition:function(a){(0,e.default)(a).val(a.value)},copyValues:function(a){var b=k.getCurrentHeader(a),c=k.getCurrentSearchControls(a);a.options.valuesFilterControl=[],b.find(c).each(function(){a.options.valuesFilterControl.push({field:(0,e.default)(this).closest('[data-field]').data('field'),value:(0,e.default)(this).val(),position:k.getCursorPosition((0,e.default)(this).get(0)),hasFocus:(0,e.default)(this).is(':focus')})})},setValues:function(a){var b=null,c=[],d=k.getCurrentHeader(a),f=k.getCurrentSearchControls(a);if(0<a.options.valuesFilterControl.length){var g=null;d.find(f).each(function(){b=(0,e.default)(this).closest('[data-field]').data('field'),c=e.default.grep(a.options.valuesFilterControl,function(a){return a.field===b}),0<c.length&&((0,e.default)(this).val(c[0].value),c[0].hasFocus&&(g=function(a,b){return function closedCallback(){a.focus(),k.setCursorPosition(a,b)}}((0,e.default)(this).get(0),c[0].position)))}),null!==g&&g()}},collectBootstrapCookies:function(){var a=[],b=document.cookie.match(/(?:bs.table.)(\w*)/g);if(b)return e.default.each(b,function(b,c){var d=c;/./.test(d)&&(d=d.split('.').pop()),-1===e.default.inArray(d,a)&&a.push(d)}),a},escapeID:function(a){return(a+'').replace(/(:|\.|\[|\]|,)/g,'\\$1')},isColumnSearchableViaSelect:function(a){var b=a.filterControl,c=a.searchable;return b&&'select'===b.toLowerCase()&&c},isFilterDataNotGiven:function(a){var b=a.filterData;return b===void 0||'column'===b.toLowerCase()},hasSelectControlElement:function(a){return a&&0<a.length},initFilterSelectControls:function(a){var b=a.data,c=a.pageTo<a.options.data.length?a.options.data.length:a.pageTo,d=a.options.pagination?'server'===a.options.sidePagination?a.pageTo:a.options.totalRows:a.pageTo;e.default.each(a.header.fields,function(c,f){var g=a.columns[a.fieldsColumnsIndex[f]],j=(0,e.default)('.bootstrap-table-filter-control-'+k.escapeID(g.field));if(k.isColumnSearchableViaSelect(g)&&k.isFilterDataNotGiven(g)&&k.hasSelectControlElement(j)){0===j.get(j.length-1).options.length&&k.addOptionToSelectControl(j,'','');for(var l={},m=0;m<d;m++){var i=b[m][f],n=h.calculateObjectValue(a.header,a.header.formatters[c],[i,b[m],m],i);l[n]=i}for(var o in l)k.addOptionToSelectControl(j,l[o],o);k.sortSelectControl(j),a.options.hideUnusedSelectOptions&&k.hideUnusedSelectOptions(j,l)}}),a.trigger('created-controls')},getFilterDataMethod:function(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++)if(c[d]===b)return a[b];return null},createControls:function(a,b){var c=!1,d=void 0,f=void 0;e.default.each(a.columns,function(g,h){if(d='hidden',f=[],!!h.visible){if(!h.filterControl)f.push('<div class="no-filter-control"></div>');else{f.push('<div class="filter-control">');var p=h.filterControl.toLowerCase();h.searchable&&a.options.filterTemplate[p]&&(c=!0,d='visible',f.push(a.options.filterTemplate[p](a,h.field,d,h.filterControlPlaceholder?h.filterControlPlaceholder:'','filter-control-'+g)))}if(e.default.each(b.children().children(),function(a,b){var c=(0,e.default)(b);if(c.data('field')===h.field)return c.find('.fht-cell').append(f.join('')),!1}),void 0!==h.filterData&&'column'!==h.filterData.toLowerCase()){var j=k.getFilterDataMethod(i,h.filterData.substring(0,h.filterData.indexOf(':'))),l=void 0,m=void 0;if(null!==j)l=h.filterData.substring(h.filterData.indexOf(':')+1,h.filterData.length),m=(0,e.default)('.bootstrap-table-filter-control-'+k.escapeID(h.field)),k.addOptionToSelectControl(m,'',''),j(l,m);else throw new SyntaxError('Error. You should use any of these allowed filter data methods: var, json, url. Use like this: var: {key: "value"}');var n=void 0,o=void 0;switch(j){case'url':e.default.ajax({url:l,dataType:'json',success:function(a){for(var b in a)k.addOptionToSelectControl(m,b,a[b]);k.sortSelectControl(m)}});break;case'var':for(o in n=window[l],n)k.addOptionToSelectControl(m,o,n[o]);k.sortSelectControl(m);break;case'jso':for(o in n=JSON.parse(l),n)k.addOptionToSelectControl(m,o,n[o]);k.sortSelectControl(m);}}}}),c?(b.off('keyup','input').on('keyup','input',function(b,c){if((b.keyCode=c?c.keyCode:b.keyCode,!(a.options.searchOnEnterKey&&13!==b.keyCode))&&!(-1<e.default.inArray(b.keyCode,[37,38,39,40]))){var d=(0,e.default)(b.currentTarget);d.is(':checkbox')||d.is(':radio')||(clearTimeout(b.currentTarget.timeoutId||0),b.currentTarget.timeoutId=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut))}}),b.off('change','select').on('change','select',function(b){a.options.searchOnEnterKey&&13!==b.keyCode||-1<e.default.inArray(b.keyCode,[37,38,39,40])||(clearTimeout(b.currentTarget.timeoutId||0),b.currentTarget.timeoutId=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut))}),b.off('mouseup','input').on('mouseup','input',function(b){var c=(0,e.default)(this),d=c.val();''===d||setTimeout(function(){var d=c.val();''===d&&(clearTimeout(b.currentTarget.timeoutId||0),b.currentTarget.timeoutId=setTimeout(function(){a.onColumnSearch(b)},a.options.searchTimeOut))},1)}),0<b.find('.date-filter-control').length&&e.default.each(a.columns,function(a,c){var d=c.filterControl,f=c.field,g=c.filterDatepickerOptions;d!==void 0&&'datepicker'===d.toLowerCase()&&b.find('.date-filter-control.bootstrap-table-filter-control-'+f).datepicker(g).on('changeDate',function(a){var b=a.currentTarget;(0,e.default)(h.sprintf('#%s',b.id)).val(b.value),(0,e.default)(b).keyup()})})):b.find('.filterControl').hide()},getDirectionOfSelectOptions:function(a){var b=a===void 0?'left':a.toLowerCase();return'left'===b?'ltr':'right'===b?'rtl':'auto'===b?'auto':'ltr'}},i={var:function(a,b){var c=window[a];for(var d in c)k.addOptionToSelectControl(b,d,c[d]);k.sortSelectControl(b)},url:function(a,b){e.default.ajax({url:a,dataType:'json',success:function(a){for(var c in a)k.addOptionToSelectControl(b,c,a[c]);k.sortSelectControl(b)}})},json:function(a,b){var c=JSON.parse(a);for(var d in c)k.addOptionToSelectControl(b,d,c[d]);k.sortSelectControl(b)}};e.default.extend(e.default.fn.bootstrapTable.defaults,{filterControl:!1,onColumnSearch:function(){return!1},onCreatedControls:function(){return!0},filterShowClear:!1,alignmentSelectControlOptions:void 0,filterTemplate:{input:function(a,b,c,d){return h.sprintf('<input type="text" class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" placeholder="%s">',b,c,d)},select:function(a,b,c){var d=a.options;return h.sprintf('<select class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" dir="%s"></select>',b,c,k.getDirectionOfSelectOptions(d.alignmentSelectControlOptions))},datepicker:function(a,b,c){return h.sprintf('<input type="text" class="form-control date-filter-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',b,c)}},disableControlWhenSearch:!1,searchOnEnterKey:!1,valuesFilterControl:[]}),e.default.extend(e.default.fn.bootstrapTable.columnDefaults,{filterControl:void 0,filterData:void 0,filterDatepickerOptions:void 0,filterStrictSearch:!1,filterStartsWithSearch:!1,filterControlPlaceholder:''}),e.default.extend(e.default.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":'onColumnSearch',"created-controls.bs.table":'onCreatedControls'}),e.default.extend(e.default.fn.bootstrapTable.defaults.icons,{clear:'glyphicon-trash icon-clear'}),e.default.extend(e.default.fn.bootstrapTable.locales,{formatClearFilters:function(){return'Clear Filters'}}),e.default.extend(e.default.fn.bootstrapTable.defaults,e.default.fn.bootstrapTable.locales),e.default.fn.bootstrapTable.methods.push('triggerSearch'),e.default.BootstrapTable=function(a){function i(){return b(this,i),c(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return d(i,a),f(i,[{key:'init',value:function(){if(this.options.filterControl){var a=this;this.options.valuesFilterControl=[],this.$el.on('reset-view.bs.table',function(){!a.options.height||0<a.$tableHeader.find('select').length||0<a.$tableHeader.find('input').length||k.createControls(a,a.$tableHeader)}).on('post-header.bs.table',function(){k.setValues(a)}).on('post-body.bs.table',function(){a.options.height&&k.fixHeaderCSS(a)}).on('column-switch.bs.table',function(){k.setValues(a)}).on('load-success.bs.table',function(){a.EnableControls(!0)}).on('load-error.bs.table',function(){a.EnableControls(!0)})}g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'init',this).call(this)}},{key:'initToolbar',value:function(){if(this.showToolbar=this.showToolbar||this.options.filterControl&&this.options.filterShowClear,g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'initToolbar',this).call(this),this.options.filterControl&&this.options.filterShowClear){var a=this.$toolbar.find('>.btn-group'),b=a.find('.filter-show-clear');b.length||(b=(0,e.default)([h.sprintf('<button class="btn btn-%s filter-show-clear" ',this.options.buttonsClass),h.sprintf('type="button" title="%s">',this.options.formatClearFilters()),h.sprintf('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.clear),'</button>'].join('')).appendTo(a),b.off('click').on('click',e.default.proxy(this.clearFilterControl,this)))}}},{key:'initHeader',value:function(){g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'initHeader',this).call(this),this.options.filterControl&&k.createControls(this,this.$header)}},{key:'initBody',value:function(){g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'initBody',this).call(this),k.initFilterSelectControls(this)}},{key:'initSearch',value:function(){var a=this,b=e.default.isEmptyObject(a.filterColumnsPartial)?null:a.filterColumnsPartial;(null===b||1>=Object.keys(b).length)&&g(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),'initSearch',this).call(this),'server'===this.options.sidePagination||null===b||(a.data=b?a.options.data.filter(function(c,d){var f=[];return Object.keys(c).forEach(function(g){var h=a.columns[a.fieldsColumnsIndex[g]],i=(b[g]||'').toLowerCase(),j=c[g];''===i?f.push(!0):(h&&h.searchFormatter&&(j=e.default.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[e.default.inArray(g,a.header.fields)],[j,c,d],j)),-1!==e.default.inArray(g,a.header.fields)&&('string'==typeof j||'number'==typeof j)&&(h.filterStrictSearch?j.toString().toLowerCase()===i.toString().toLowerCase()?f.push(!0):f.push(!1):h.filterStartsWithSearch?0===(''+j).toLowerCase().indexOf(i)?f.push(!0):f.push(!1):(''+j).toLowerCase().includes(i)?f.push(!0):f.push(!1)))}),!f.includes(!1)}):a.data)}},{key:'initColumnSearch',value:function(a){if(k.copyValues(this),a)for(var b in this.filterColumnsPartial=a,this.updatePagination(),a)this.trigger('column-search',b,a[b])}},{key:'onColumnSearch',value:function(a){if(!(-1<e.default.inArray(a.keyCode,[37,38,39,40]))){k.copyValues(this);var b=e.default.trim((0,e.default)(a.currentTarget).val()),c=(0,e.default)(a.currentTarget).closest('[data-field]').data('field');e.default.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),b?this.filterColumnsPartial[c]=b:delete this.filterColumnsPartial[c],this.searchText+='randomText',this.options.pageNumber=1,this.EnableControls(!1),this.onSearch(a),this.trigger('column-search',c,b)}}},{key:'clearFilterControl',value:function(){if(this.options.filterControl&&this.options.filterShowClear){var a=this,b=k.collectBootstrapCookies(),c=k.getCurrentHeader(a),d=c.closest('table'),f=c.find(k.getCurrentSearchControls(a)),g=a.$toolbar.find('.search input'),j=!1,i=0;if(e.default.each(a.options.valuesFilterControl,function(a,b){j=!!j||''!==b.value,b.value=''}),k.setValues(a),clearTimeout(i),i=setTimeout(function(){b&&0<b.length&&e.default.each(b,function(b,c){void 0!==a.deleteCookie&&a.deleteCookie(c)})},a.options.searchTimeOut),!j)return;if(0<f.length)this.filterColumnsPartial={},(0,e.default)(f[0]).trigger('INPUT'===f[0].tagName?'keyup':'change',{keyCode:13});else return;if(0<g.length&&a.resetSearch(),a.options.sortName!==d.data('sortName')||a.options.sortOrder!==d.data('sortOrder')){var l=c.find(h.sprintf('[data-field="%s"]',(0,e.default)(f[0]).closest('table').data('sortName')));0<l.length&&(a.onSort({type:'keypress',currentTarget:l}),(0,e.default)(l).find('.sortable').trigger('click'))}}}},{key:'triggerSearch',value:function(){var a=k.getCurrentHeader(this),b=k.getCurrentSearchControls(this);a.find(b).each(function(){var a=(0,e.default)(this);a.is('select')?a.change():a.keyup()})}},{key:'EnableControls',value:function(a){if(this.options.disableControlWhenSearch&&'server'===this.options.sidePagination){var b=k.getCurrentHeader(this),c=k.getCurrentSearchControls(this);a?b.find(c).removeProp('disabled'):b.find(c).prop('disabled','disabled')}}}]),i}(e.default.BootstrapTable)});