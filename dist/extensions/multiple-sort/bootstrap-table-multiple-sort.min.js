/**
  * bootstrap-table - An extended Bootstrap table with radio, checkbox, sort, pagination, and other added features. (supports twitter bootstrap v2 and v3).
  *
  * @version v1.13.0
  * @homepage http://bootstrap-table.wenzhixin.net.cn
  * @author wenzhixin <wenzhixin2010@gmail.com> (http://wenzhixin.net.cn/)
  * @license MIT
  */

(function(a,b){if('function'==typeof define&&define.amd)define(['jquery'],b);else if('undefined'!=typeof exports)b(require('jquery'));else{b(a.jquery),a.bootstrapTableMultipleSort={exports:{}}.exports}})(this,function(a){'use strict';var d=function(a){return a&&a.__esModule?a:{default:a}}(a),b='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},c=!1,e=function(a){var e=a.sortModalSelector,f='#'+e;if(!(0,d.default)(f).hasClass('modal')){var g='  <div class="modal fade" id="'+e+'" tabindex="-1" role="dialog" aria-labelledby="'+e+'Label" aria-hidden="true">';g+='         <div class="modal-dialog">',g+='             <div class="modal-content">',g+='                 <div class="modal-header">',g+='                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>',g+='                     <h4 class="modal-title" id="'+e+'Label">'+a.options.formatMultipleSort()+'</h4>',g+='                 </div>',g+='                 <div class="modal-body">',g+='                     <div class="bootstrap-table">',g+='                         <div class="fixed-table-toolbar">',g+='                             <div class="bars">',g+='                                 <div id="toolbar">',g+='                                     <button id="add" type="button" class="btn btn-default"><i class="'+a.options.iconsPrefix+' '+a.options.icons.plus+'"></i> '+a.options.formatAddLevel()+'</button>',g+='                                     <button id="delete" type="button" class="btn btn-default" disabled><i class="'+a.options.iconsPrefix+' '+a.options.icons.minus+'"></i> '+a.options.formatDeleteLevel()+'</button>',g+='                                 </div>',g+='                             </div>',g+='                         </div>',g+='                         <div class="fixed-table-container">',g+='                             <table id="multi-sort" class="table">',g+='                                 <thead>',g+='                                     <tr>',g+='                                         <th></th>',g+='                                         <th><div class="th-inner">'+a.options.formatColumn()+'</div></th>',g+='                                         <th><div class="th-inner">'+a.options.formatOrder()+'</div></th>',g+='                                     </tr>',g+='                                 </thead>',g+='                                 <tbody></tbody>',g+='                             </table>',g+='                         </div>',g+='                     </div>',g+='                 </div>',g+='                 <div class="modal-footer">',g+='                     <button type="button" class="btn btn-default" data-dismiss="modal">'+a.options.formatCancel()+'</button>',g+='                     <button type="button" class="btn btn-primary">'+a.options.formatSort()+'</button>',g+='                 </div>',g+='             </div>',g+='         </div>',g+='     </div>',(0,d.default)('body').append((0,d.default)(g)),a.$sortModal=(0,d.default)(f);var h=a.$sortModal.find('tbody > tr');if(a.$sortModal.off('click','#add').on('click','#add',function(){var b=a.$sortModal.find('.multi-sort-name:first option').length,c=a.$sortModal.find('tbody tr').length;c<b&&(c++,a.addLevel(),a.setButtonStates())}),a.$sortModal.off('click','#delete').on('click','#delete',function(){var b=a.$sortModal.find('.multi-sort-name:first option').length,c=a.$sortModal.find('tbody tr').length;1<c&&c<=b&&(c--,a.$sortModal.find('tbody tr:last').remove(),a.setButtonStates())}),a.$sortModal.off('click','.btn-primary').on('click','.btn-primary',function(){var b=a.$sortModal.find('tbody > tr'),e=a.$sortModal.find('div.alert'),f=[],g=[];a.options.sortPriority=d.default.map(b,function(a){var b=(0,d.default)(a),c=b.find('.multi-sort-name').val(),e=b.find('.multi-sort-order').val();return f.push(c),{sortName:c,sortOrder:e}});for(var h=f.sort(),j=0;j<f.length-1;j++)h[j+1]==h[j]&&g.push(h[j]);if(0<g.length)0===e.length&&(e='<div class="alert alert-danger" role="alert"><strong>'+a.options.formatDuplicateAlertTitle()+'</strong> '+a.options.formatDuplicateAlertDescription()+'</div>',(0,d.default)(e).insertBefore(a.$sortModal.find('.bars')));else{if(1===e.length&&(0,d.default)(e).remove(),a.$sortModal.modal('hide'),a.options.sortName='','server'===a.options.sidePagination){var i=a.options.queryParams;return a.options.queryParams=function(b){return b.multiSort=a.options.sortPriority,i(b)},c=!1,void a.initServer(a.options.silentSort)}a.onMultipleSort()}}),(null===a.options.sortPriority||0===a.options.sortPriority.length)&&a.options.sortName&&(a.options.sortPriority=[{sortName:a.options.sortName,sortOrder:a.options.sortOrder}]),!(null!==a.options.sortPriority&&0<a.options.sortPriority.length))a.addLevel(0);else if(h.length<a.options.sortPriority.length&&'object'===b(a.options.sortPriority))for(var j=0;j<a.options.sortPriority.length;j++)a.addLevel(j,a.options.sortPriority[j]);a.setButtonStates()}};d.default.fn.bootstrapTable.methods.push('multipleSort'),d.default.extend(d.default.fn.bootstrapTable.defaults,{showMultiSort:!1,showMultiSortButton:!0,sortPriority:null,onMultipleSort:function(){return!1}}),d.default.extend(d.default.fn.bootstrapTable.defaults.icons,{sort:'glyphicon-sort',plus:'glyphicon-plus',minus:'glyphicon-minus'}),d.default.extend(d.default.fn.bootstrapTable.Constructor.EVENTS,{"multiple-sort.bs.table":'onMultipleSort'}),d.default.extend(d.default.fn.bootstrapTable.locales,{formatMultipleSort:function(){return'Multiple Sort'},formatAddLevel:function(){return'Add Level'},formatDeleteLevel:function(){return'Delete Level'},formatColumn:function(){return'Column'},formatOrder:function(){return'Order'},formatSortBy:function(){return'Sort by'},formatThenBy:function(){return'Then by'},formatSort:function(){return'Sort'},formatCancel:function(){return'Cancel'},formatDuplicateAlertTitle:function(){return'Duplicate(s) detected!'},formatDuplicateAlertDescription:function(){return'Please remove or change any duplicate column.'},formatSortOrders:function(){return{asc:'Ascending',desc:'Descending'}}}),d.default.extend(d.default.fn.bootstrapTable.defaults,d.default.fn.bootstrapTable.locales);var f=d.default.fn.bootstrapTable.Constructor,g=f.prototype.initToolbar;f.prototype.initToolbar=function(){this.showToolbar=this.showToolbar||this.options.showMultiSort;var a=this,f='sortModal_'+this.$el.attr('id'),h='#'+f;if(this.$sortModal=(0,d.default)(h),this.sortModalSelector=f,g.apply(this,Array.prototype.slice.apply(arguments)),'server'===a.options.sidePagination&&!c&&null!==a.options.sortPriority){var i=a.options.queryParams;a.options.queryParams=function(b){return b.multiSort=a.options.sortPriority,i(b)}}if(this.options.showMultiSort){var j=this.$toolbar.find('>.btn-group').first(),k=this.$toolbar.find('div.multi-sort');!k.length&&this.options.showMultiSortButton&&(k='  <button class="multi-sort btn btn-default'+(void 0===this.options.iconSize?'':' btn-'+this.options.iconSize)+'" type="button" data-toggle="modal" data-target="'+h+'" title="'+this.options.formatMultipleSort()+'">',k+='     <i class="'+this.options.iconsPrefix+' '+this.options.icons.sort+'"></i>',k+='</button>',j.append(k),e(a)),this.$el.on('sort.bs.table',function(){c=!0}),this.$el.on('multiple-sort.bs.table',function(){c=!1}),this.$el.on('load-success.bs.table',function(){c||null===a.options.sortPriority||'object'!==b(a.options.sortPriority)||'server'===a.options.sidePagination||a.onMultipleSort()}),this.$el.on('column-switch.bs.table',function(b,c){for(var d=0;d<a.options.sortPriority.length;d++)a.options.sortPriority[d].sortName===c&&a.options.sortPriority.splice(d,1);a.assignSortableArrows(),a.$sortModal.remove(),e(a)}),this.$el.on('reset-view.bs.table',function(){c||null===a.options.sortPriority||'object'!==b(a.options.sortPriority)||a.assignSortableArrows()})}},f.prototype.multipleSort=function(){var a=this;c||null===a.options.sortPriority||'object'!==b(a.options.sortPriority)||'server'===a.options.sidePagination||a.onMultipleSort()},f.prototype.onMultipleSort=function(){var c=this,e=function(a,b){return a>b?1:a<b?-1:0},f=function(f,a){for(var b=[],g=[],h=0;h<c.options.sortPriority.length;h++){var i='desc'===c.options.sortPriority[h].sortOrder?-1:1,j=f[c.options.sortPriority[h].sortName],k=a[c.options.sortPriority[h].sortName];(j===void 0||null===j)&&(j=''),(k===void 0||null===k)&&(k=''),d.default.isNumeric(j)&&d.default.isNumeric(k)&&(j=parseFloat(j),k=parseFloat(k)),'string'!=typeof j&&(j=j.toString()),b.push(i*e(j,k)),g.push(i*e(k,j))}return e(b,g)};this.data.sort(function(c,a){return f(c,a)}),this.initBody(),this.assignSortableArrows(),this.trigger('multiple-sort')},f.prototype.addLevel=function(a,b){var c=0===a?this.options.formatSortBy():this.options.formatThenBy();this.$sortModal.find('tbody').append((0,d.default)('<tr>').append((0,d.default)('<td>').text(c)).append((0,d.default)('<td>').append((0,d.default)('<select class="form-control multi-sort-name">'))).append((0,d.default)('<td>').append((0,d.default)('<select class="form-control multi-sort-order">'))));var e=this.$sortModal.find('.multi-sort-name').last(),f=this.$sortModal.find('.multi-sort-order').last();d.default.each(this.columns,function(a,b){return!1===b.sortable||!1===b.visible||void e.append('<option value="'+b.field+'">'+b.title+'</option>')}),d.default.each(this.options.formatSortOrders(),function(a,b){f.append('<option value="'+a+'">'+b+'</option>')}),b!==void 0&&(e.find('option[value="'+b.sortName+'"]').attr('selected',!0),f.find('option[value="'+b.sortOrder+'"]').attr('selected',!0))},f.prototype.assignSortableArrows=function(){for(var a=this,b=a.$header.find('th'),e=0;e<b.length;e++)for(var f=0;f<a.options.sortPriority.length;f++)(0,d.default)(b[e]).data('field')===a.options.sortPriority[f].sortName&&(0,d.default)(b[e]).find('.sortable').removeClass('desc asc').addClass(a.options.sortPriority[f].sortOrder)},f.prototype.setButtonStates=function(){var a=this.$sortModal.find('.multi-sort-name:first option').length,b=this.$sortModal.find('tbody tr').length;b==a&&this.$sortModal.find('#add').attr('disabled','disabled'),1<b&&this.$sortModal.find('#delete').removeAttr('disabled'),b<a&&this.$sortModal.find('#add').removeAttr('disabled'),1==b&&this.$sortModal.find('#delete').attr('disabled','disabled')}});