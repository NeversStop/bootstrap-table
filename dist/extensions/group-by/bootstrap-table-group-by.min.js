/**
  * bootstrap-table - An extended Bootstrap table with radio, checkbox, sort, pagination, and other added features. (supports twitter bootstrap v2 and v3).
  *
  * @version v1.13.0
  * @homepage http://bootstrap-table.wenzhixin.net.cn
  * @author wenzhixin <wenzhixin2010@gmail.com> (http://wenzhixin.net.cn/)
  * @license MIT
  */

(function(a,b){if('function'==typeof define&&define.amd)define(['jquery'],b);else if('undefined'!=typeof exports)b(require('jquery'));else{b(a.jquery),a.bootstrapTableGroupBy={exports:{}}.exports}})(this,function(a){'use strict';var b,c=function(a){return a&&a.__esModule?a:{default:a}}(a),d='data-tt-parent-id',e={},f=void 0,g=function(a,b){for(var d=a.$body.find('tr').not('[data-tt-parent-id]'),e=0;e<d.length;e++)if(e===b)return(0,c.default)(d[e]).attr('data-tt-id')},h=function(a,b){var d={};return c.default.each(b,function(b,c){if(!c.IsParent)for(var e in c)isNaN(parseFloat(c[e]))||a.columns[a.fieldsColumnsIndex[e]].groupBySumGroup&&(void 0===d[e]&&(d[e]=0),d[e]+=+c[e])}),d},i=function(a,c){return b.apply([a,c]),e['data-tt-id'.toString()]=c,a.IsParent?(f=c,delete e[d.toString()]):e[d.toString()]=void 0==f?c:f,e},j=function(a,b){for(var c=[],d=0;d<a.options.groupByField.length;d++)c.push(b[a.options.groupByField[d]]);return c},k=function(a,b,c){for(var d={},e=0;e<a.options.groupByField.length;e++)d[a.options.groupByField[e].toString()]=b[c][0][a.options.groupByField[e]];return d.IsParent=!0,d},l=function(a,b){var d={};return c.default.each(a,function(a,c){var e=JSON.stringify(b(c));d[e]=d[e]||[],d[e].push(c)}),Object.keys(d).map(function(a){return d[a]})},m=function(a,b){for(var d=[],e={},f=l(b,function(b){return j(a,b)}),g=0;g<f.length;g++)f[g].unshift(k(a,f,g)),a.options.groupBySumGroup&&(e=h(a,f[g]),!c.default.isEmptyObject(e)&&f[g].push(e));return d=d.concat.apply(d,f),!a.options.loaded&&0<d.length&&(a.options.loaded=!0,a.options.originalData=a.options.data,a.options.data=d),d};c.default.extend(c.default.fn.bootstrapTable.defaults,{groupBy:!1,groupByField:[],groupBySumGroup:!1,groupByInitExpanded:void 0,loaded:!1,originalData:void 0}),c.default.fn.bootstrapTable.methods.push('collapseAll','expandAll','refreshGroupByField'),c.default.extend(c.default.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:!1});var n=c.default.fn.bootstrapTable.Constructor,o=n.prototype.init,p=n.prototype.initData;n.prototype.init=function(){if(!this.options.sortName&&this.options.groupBy&&0<this.options.groupByField.length){var a=this;Object.keys||c.default.fn.bootstrapTable.utils.objectKeys(),this.options.loaded=!1,this.options.originalData=void 0,b=this.options.rowAttributes,this.options.rowAttributes=i,this.$el.off('post-body.bs.table').on('post-body.bs.table',function(){a.$el.treetable({expandable:!0,onNodeExpand:function(){a.options.height&&a.resetHeader()},onNodeCollapse:function(){a.options.height&&a.resetHeader()}},!0),void 0!==a.options.groupByInitExpanded&&('number'==typeof a.options.groupByInitExpanded?a.expandNode(a.options.groupByInitExpanded):'all'===a.options.groupByInitExpanded.toLowerCase()&&a.expandAll())})}o.apply(this,Array.prototype.slice.apply(arguments))},n.prototype.initData=function(a,b){!this.options.sortName&&this.options.groupBy&&0<this.options.groupByField.length&&(this.options.groupByField='string'==typeof this.options.groupByField?this.options.groupByField.replace('[','').replace(']','').replace(/ /g,'').toLowerCase().split(','):this.options.groupByField,a=m(this,a?a:this.options.data)),p.apply(this,[a,b])},n.prototype.expandAll=function(){this.$el.treetable('expandAll')},n.prototype.collapseAll=function(){this.$el.treetable('collapseAll')},n.prototype.expandNode=function(a){a=g(this,a),a!==void 0&&this.$el.treetable('expandNode',a)},n.prototype.refreshGroupByField=function(a){c.default.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,a)||(this.options.groupByField=a,this.load(this.options.originalData))}});